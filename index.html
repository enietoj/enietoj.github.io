<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ERP/CRM PyMES - Sistema de Gestión Empresarial</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <i class="fas fa-building"></i>
                <h1>ERP/CRM PyMES</h1>
                <p>Sistema de Gestión Empresarial</p>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Usuario:</label>
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" id="username" name="username" required autocomplete="username">
                    </div>
                </div>
                <div class="form-group">
                    <label for="password">Contraseña:</label>
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="password" name="password" required autocomplete="current-password">
                        <button type="button" class="password-toggle" onclick="togglePassword()">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
                </button>
            </form>
            <div class="demo-credentials">
                <h4><i class="fas fa-info-circle"></i> Credenciales de Demostración</h4>
                <div class="credential-item">
                    <strong>Administrador:</strong> admin / admin123
                </div>
                <div class="credential-item">
                    <strong>Empleado:</strong> empleado / emp123
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="main-container">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-building"></i>
                    <div>
                        <h2>ERP/CRM PyMES</h2>
                        <p id="userRole">Administrador</p>
                    </div>
                </div>
            </div>
            <ul class="sidebar-menu">
                <li><a href="#" data-section="dashboard" class="active">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a></li>
                <li><a href="#" data-section="inventario">
                    <i class="fas fa-boxes"></i> Inventario
                </a></li>
                <li><a href="#" data-section="clientes">
                    <i class="fas fa-users"></i> Clientes
                </a></li>
                <li><a href="#" data-section="produccion">
                    <i class="fas fa-industry"></i> Producción
                </a></li>
                <li><a href="#" data-section="reportes">
                    <i class="fas fa-chart-bar"></i> Reportes
                </a></li>
                <li><a href="#" data-section="configuracion">
                    <i class="fas fa-cog"></i> Configuración
                </a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <div class="header-left">
                    <button class="mobile-menu-btn" id="mobileMenuBtn">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 id="pageTitle">Dashboard</h1>
                </div>
                <div class="header-right">
                    <div class="search-container">
                        <i class="fas fa-search"></i>
                        <input type="text" id="globalSearch" placeholder="Buscar...">
                    </div>
                    <div class="user-menu">
                        <div class="user-info">
                            <i class="fas fa-user-circle"></i>
                            <span id="currentUser">Usuario</span>
                        </div>
                        <button class="logout-btn" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
                        </button>
                    </div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div id="dashboard" class="content-section active">
                <div class="dashboard-grid">
                    <div class="metric-card">
                        <div class="metric-icon">
                            <i class="fas fa-boxes"></i>
                        </div>
                        <div class="metric-content">
                            <h3 id="totalProductos">0</h3>
                            <p>Total Productos</p>
                            <span class="metric-change positive">+5% este mes</span>
                        </div>
                    </div>
                    <div class="metric-card green">
                        <div class="metric-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="metric-content">
                            <h3 id="totalClientes">0</h3>
                            <p>Total Clientes</p>
                            <span class="metric-change positive">+12% este mes</span>
                        </div>
                    </div>
                    <div class="metric-card orange">
                        <div class="metric-icon">
                            <i class="fas fa-industry"></i>
                        </div>
                        <div class="metric-content">
                            <h3 id="ordenesProduccion">0</h3>
                            <p>Órdenes Activas</p>
                            <span class="metric-change neutral">Sin cambios</span>
                        </div>
                    </div>
                    <div class="metric-card red">
                        <div class="metric-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="metric-content">
                            <h3 id="stockBajo">0</h3>
                            <p>Stock Bajo</p>
                            <span class="metric-change negative">Requiere atención</span>
                        </div>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>Ventas Últimos 6 Meses</h3>
                            <select id="salesPeriod">
                                <option value="6">Últimos 6 meses</option>
                                <option value="12">Último año</option>
                            </select>
                        </div>
                        <canvas id="salesChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>Distribución por Categorías</h3>
                        </div>
                        <canvas id="categoryChart"></canvas>
                    </div>
                </div>

                <div class="dashboard-activity">
                    <div class="activity-container">
                        <h3><i class="fas fa-clock"></i> Actividad Reciente</h3>
                        <div id="recentActivity"></div>
                    </div>
                    <div class="quick-actions">
                        <h3><i class="fas fa-bolt"></i> Acciones Rápidas</h3>
                        <div class="quick-actions-grid">
                            <button class="quick-action-btn" onclick="showSection('inventario')">
                                <i class="fas fa-plus"></i>
                                <span>Nuevo Producto</span>
                            </button>
                            <button class="quick-action-btn" onclick="showSection('clientes')">
                                <i class="fas fa-user-plus"></i>
                                <span>Nuevo Cliente</span>
                            </button>
                            <button class="quick-action-btn" onclick="showSection('produccion')">
                                <i class="fas fa-plus-circle"></i>
                                <span>Nueva Orden</span>
                            </button>
                            <button class="quick-action-btn" onclick="exportData()">
                                <i class="fas fa-download"></i>
                                <span>Exportar Datos</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inventario Section -->
            <div id="inventario" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-boxes"></i> Gestión de Inventario</h2>
                    <div class="section-actions">
                        <button class="btn btn-secondary" onclick="toggleFilters()">
                            <i class="fas fa-filter"></i> Filtros
                        </button>
                        <button class="btn btn-primary" onclick="showProductForm()">
                            <i class="fas fa-plus"></i> Nuevo Producto
                        </button>
                    </div>
                </div>

                <div class="filters-container" id="inventoryFilters" style="display: none;">
                    <div class="filter-row">
                        <div class="filter-group">
                            <label>Categoría:</label>
                            <select id="filterCategory">
                                <option value="">Todas</option>
                                <option value="materia-prima">Materia Prima</option>
                                <option value="productos-terminados">Productos Terminados</option>
                                <option value="insumos">Insumos</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Estado:</label>
                            <select id="filterStatus">
                                <option value="">Todos</option>
                                <option value="ok">En Stock</option>
                                <option value="low">Stock Bajo</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Búsqueda:</label>
                            <input type="text" id="filterSearch" placeholder="Buscar producto...">
                        </div>
                    </div>
                </div>

                <div class="form-container" id="productFormContainer" style="display: none;">
                    <div class="form-header">
                        <h3 id="productFormTitle">Agregar Producto</h3>
                        <button type="button" class="btn-close" onclick="hideProductForm()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <form id="productForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productName">Nombre del Producto:</label>
                                <input type="text" id="productName" required>
                            </div>
                            <div class="form-group">
                                <label for="productCategory">Categoría:</label>
                                <select id="productCategory" required>
                                    <option value="">Seleccionar categoría</option>
                                    <option value="materia-prima">Materia Prima</option>
                                    <option value="productos-terminados">Productos Terminados</option>
                                    <option value="insumos">Insumos</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="productStock">Stock Actual:</label>
                                <input type="number" id="productStock" min="0" required>
                            </div>
                            <div class="form-group">
                                <label for="productMinStock">Stock Mínimo:</label>
                                <input type="number" id="productMinStock" min="0" required>
                            </div>
                            <div class="form-group">
                                <label for="productPrice">Precio Unitario:</label>
                                <input type="number" id="productPrice" step="0.01" min="0" required>
                            </div>
                            <div class="form-group">
                                <label for="productUnit">Unidad de Medida:</label>
                                <select id="productUnit">
                                    <option value="unidad">Unidad</option>
                                    <option value="kg">Kilogramo</option>
                                    <option value="litro">Litro</option>
                                    <option value="metro">Metro</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">
                                <i class="fas fa-save"></i> Guardar Producto
                            </button>
                            <button type="button" class="btn-secondary" onclick="hideProductForm()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                        </div>
                    </form>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h3>Lista de Productos</h3>
                        <div class="table-actions">
                            <button class="btn btn-secondary" onclick="exportInventory()">
                                <i class="fas fa-download"></i> Exportar
                            </button>
                        </div>
                    </div>
                    <div class="table-wrapper">
                        <table id="productsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nombre</th>
                                    <th>Categoría</th>
                                    <th>Stock</th>
                                    <th>Stock Mínimo</th>
                                    <th>Precio</th>
                                    <th>Unidad</th>
                                    <th>Estado</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="productsTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Clientes Section -->
            <div id="clientes" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-users"></i> Gestión de Clientes</h2>
                    <div class="section-actions">
                        <button class="btn btn-primary" onclick="showClientForm()">
                            <i class="fas fa-plus"></i> Nuevo Cliente
                        </button>
                    </div>
                </div>

                <div class="form-container" id="clientFormContainer" style="display: none;">
                    <div class="form-header">
                        <h3 id="clientFormTitle">Agregar Cliente</h3>
                        <button type="button" class="btn-close" onclick="hideClientForm()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <form id="clientForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="clientName">Nombre/Razón Social:</label>
                                <input type="text" id="clientName" required>
                            </div>
                            <div class="form-group">
                                <label for="clientEmail">Email:</label>
                                <input type="email" id="clientEmail" required>
                            </div>
                            <div class="form-group">
                                <label for="clientPhone">Teléfono:</label>
                                <input type="tel" id="clientPhone" required>
                            </div>
                            <div class="form-group">
                                <label for="clientAddress">Dirección:</label>
                                <input type="text" id="clientAddress" required>
                            </div>
                            <div class="form-group">
                                <label for="clientType">Tipo de Cliente:</label>
                                <select id="clientType" required>
                                    <option value="">Seleccionar tipo</option>
                                    <option value="minorista">Minorista</option>
                                    <option value="mayorista">Mayorista</option>
                                    <option value="corporativo">Corporativo</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="clientCity">Ciudad:</label>
                                <input type="text" id="clientCity">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">
                                <i class="fas fa-save"></i> Guardar Cliente
                            </button>
                            <button type="button" class="btn-secondary" onclick="hideClientForm()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                        </div>
                    </form>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h3>Lista de Clientes</h3>
                        <div class="table-actions">
                            <button class="btn btn-secondary" onclick="exportClients()">
                                <i class="fas fa-download"></i> Exportar
                            </button>
                        </div>
                    </div>
                    <div class="table-wrapper">
                        <table id="clientsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nombre</th>
                                    <th>Email</th>
                                    <th>Teléfono</th>
                                    <th>Tipo</th>
                                    <th>Ciudad</th>
                                    <th>Fecha Registro</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="clientsTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Producción Section -->
            <div id="produccion" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-industry"></i> Gestión de Producción</h2>
                    <div class="section-actions">
                        <button class="btn btn-primary" onclick="showProductionForm()">
                            <i class="fas fa-plus"></i> Nueva Orden
                        </button>
                    </div>
                </div>

                <div class="form-container" id="productionFormContainer" style="display: none;">
                    <div class="form-header">
                        <h3 id="productionFormTitle">Nueva Orden de Producción</h3>
                        <button type="button" class="btn-close" onclick="hideProductionForm()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <form id="productionForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productionProduct">Producto:</label>
                                <select id="productionProduct" required>
                                    <option value="">Seleccionar producto</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="productionQuantity">Cantidad:</label>
                                <input type="number" id="productionQuantity" min="1" required>
                            </div>
                            <div class="form-group">
                                <label for="productionDate">Fecha de Producción:</label>
                                <input type="date" id="productionDate" required>
                            </div>
                            <div class="form-group">
                                <label for="productionStatus">Estado:</label>
                                <select id="productionStatus" required>
                                    <option value="pendiente">Pendiente</option>
                                    <option value="en-proceso">En Proceso</option>
                                    <option value="completada">Completada</option>
                                    <option value="cancelada">Cancelada</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="productionPriority">Prioridad:</label>
                                <select id="productionPriority">
                                    <option value="baja">Baja</option>
                                    <option value="media">Media</option>
                                    <option value="alta">Alta</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="productionNotes">Notas:</label>
                            <textarea id="productionNotes" rows="3" placeholder="Notas adicionales..."></textarea>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">
                                <i class="fas fa-save"></i> Crear Orden
                            </button>
                            <button type="button" class="btn-secondary" onclick="hideProductionForm()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                        </div>
                    </form>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h3>Órdenes de Producción</h3>
                        <div class="table-filters">
                            <select id="productionStatusFilter">
                                <option value="">Todos los estados</option>
                                <option value="pendiente">Pendiente</option>
                                <option value="en-proceso">En Proceso</option>
                                <option value="completada">Completada</option>
                                <option value="cancelada">Cancelada</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-wrapper">
                        <table id="productionTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Producto</th>
                                    <th>Cantidad</th>
                                    <th>Fecha</th>
                                    <th>Estado</th>
                                    <th>Prioridad</th>
                                    <th>Progreso</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="productionTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Reportes Section -->
            <div id="reportes" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-chart-bar"></i> Reportes y Análisis</h2>
                    <div class="section-actions">
                        <button class="btn btn-secondary" onclick="generateReport()">
                            <i class="fas fa-sync-alt"></i> Actualizar
                        </button>
                        <button class="btn btn-primary" onclick="exportReport()">
                            <i class="fas fa-download"></i> Exportar Reporte
                        </button>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="metric-card">
                        <div class="metric-icon">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="metric-content">
                            <h3 id="reportTotalVentas">$0</h3>
                            <p>Total Ventas (Mes)</p>
                            <span class="metric-change positive">+15% vs mes anterior</span>
                        </div>
                    </div>
                    <div class="metric-card green">
                        <div class="metric-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="metric-content">
                            <h3 id="reportGanancias">$0</h3>
                            <p>Ganancias Estimadas</p>
                            <span class="metric-change positive">+8% vs mes anterior</span>
                        </div>
                    </div>
                    <div class="metric-card orange">
                        <div class="metric-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="metric-content">
                            <h3 id="reportProductosMasVendidos">0</h3>
                            <p>Productos Más Vendidos</p>
                            <span class="metric-change neutral">Sin cambios</span>
                        </div>
                    </div>
                    <div class="metric-card red">
                        <div class="metric-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="metric-content">
                            <h3 id="reportClientesActivos">0</h3>
                            <p>Clientes Activos</p>
                            <span class="metric-change positive">+5% este mes</span>
                        </div>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>Análisis de Ventas</h3>
                            <select id="reportPeriod">
                                <option value="month">Este Mes</option>
                                <option value="quarter">Este Trimestre</option>
                                <option value="year">Este Año</option>
                            </select>
                        </div>
                        <canvas id="reportChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>Top Productos</h3>
                        </div>
                        <canvas id="topProductsChart"></canvas>
                    </div>
                </div>

                <div class="report-summary">
                    <h3>Resumen Ejecutivo</h3>
                    <div class="summary-cards">
                        <div class="summary-card">
                            <h4>Eficiencia de Producción</h4>
                            <div class="efficiency-bar">
                                <div class="efficiency-fill" style="width: 78%"></div>
                            </div>
                            <span>78% - Buena</span>
                        </div>
                        <div class="summary-card">
                            <h4>Rotación de Inventario</h4>
                            <div class="efficiency-bar">
                                <div class="efficiency-fill" style="width: 65%"></div>
                            </div>
                            <span>65% - Mejorable</span>
                        </div>
                        <div class="summary-card">
                            <h4>Satisfacción del Cliente</h4>
                            <div class="efficiency-bar">
                                <div class="efficiency-fill" style="width: 92%"></div>
                            </div>
                            <span>92% - Excelente</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Configuración Section -->
            <div id="configuracion" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-cog"></i> Configuración</h2>
                </div>

                <div class="config-grid">
                    <div class="config-card">
                        <h3><i class="fas fa-palette"></i> Apariencia</h3>
                        <div class="config-item">
                            <label>Tema:</label>
                            <select id="themeSelect">
                                <option value="light">Claro</option>
                                <option value="dark">Oscuro</option>
                                <option value="auto">Automático</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label>Idioma:</label>
                            <select id="languageSelect">
                                <option value="es">Español</option>
                                <option value="en">English</option>
                            </select>
                        </div>
                    </div>

                    <div class="config-card">
                        <h3><i class="fas fa-bell"></i> Notificaciones</h3>
                        <div class="config-item">
                            <label>
                                <input type="checkbox" id="stockAlerts" checked>
                                Alertas de stock bajo
                            </label>
                        </div>
                        <div class="config-item">
                            <label>
                                <input type="checkbox" id="productionAlerts" checked>
                                Alertas de producción
                            </label>
                        </div>
                        <div class="config-item">
                            <label>
                                <input type="checkbox" id="emailReports">
                                Reportes por email
                            </label>
                        </div>
                    </div>

                    <div class="config-card">
                        <h3><i class="fas fa-database"></i> Datos</h3>
                        <div class="config-actions">
                            <button class="btn btn-secondary" onclick="backupData()">
                                <i class="fas fa-download"></i> Respaldar Datos
                            </button>
                            <button class="btn btn-secondary" onclick="restoreData()">
                                <i class="fas fa-upload"></i> Restaurar Datos
                            </button>
                            <button class="btn btn-danger" onclick="resetData()">
                                <i class="fas fa-trash"></i> Reiniciar Sistema
                            </button>
                        </div>
                    </div>

                    <div class="config-card">
                        <h3><i class="fas fa-info-circle"></i> Información</h3>
                        <div class="system-info">
                            <p><strong>Versión:</strong> 2.0.0</p>
                            <p><strong>Desarrollado por:</strong> Tu Nombre</p>
                            <p><strong>Proyecto académico:</strong> Ingeniería de Sistemas</p>
                            <p><strong>Año:</strong> 2024</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer"></div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Cargando...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
